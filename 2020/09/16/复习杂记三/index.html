
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>复习杂记三 | Elliot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="处理机管理1.进程调度时机与方法">
<meta property="og:type" content="article">
<meta property="og:title" content="复习杂记三">
<meta property="og:url" content="https://www.baidu.com/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0%E4%B8%89/index.html">
<meta property="og:site_name" content="Elliot">
<meta property="og:description" content="处理机管理1.进程调度时机与方法">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-09-16T12:20:53.000Z">
<meta property="article:modified_time" content="2020-09-17T12:41:01.881Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Elliot" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
<meta name="generator" content="Hexo 5.1.1"></head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Elliot</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="www.baidu.com">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-复习杂记三" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0%E4%B8%89/" class="article-date">
  <time datetime="2020-09-16T12:20:53.000Z" itemprop="datePublished">2020-09-16</time>
</a>
    

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      复习杂记三
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="处理机管理"><a href="#处理机管理" class="headerlink" title="处理机管理"></a>处理机管理</h1><h2 id="1-进程调度时机与方法"><a href="#1-进程调度时机与方法" class="headerlink" title="1.进程调度时机与方法"></a>1.进程调度时机与方法</h2><a id="more"></a>

<p>进程调度 : 按某些算法从就绪队列选择一个进程给处理机.</p>
<ul>
<li>时机<blockquote>
</blockquote>
  进程主动放弃 <strong>非剥夺</strong><br>  被动放弃  <strong>剥夺</strong><br>  处理中断时  ,  拒绝进程调度<br>  进程在内核临界区时  ,  拒绝调度  (注意区分 <strong>内核临界区</strong> 与 <strong>临界区</strong> )<br>  原语操作时  ,  拒绝调度<br>  临界资源 : 一段时间内只允许一个进程使用的资源.<br>  临界区 : 访问临界资源的代码 eg <strong>访问打印机的进程</strong><br>  内核程序临界区 : <strong>进程的就绪队列</strong> (由就绪进程与PCB组成)<blockquote>
</blockquote>
</li>
<li>方式<blockquote>
<p>非剥夺 (早期批处理系统)<br>  非剥夺 (分时操作系统, 实时操作系统)<br></p>
</blockquote>
</li>
<li>切换与过程<blockquote>
<p>狭义定义<br><br>  广义定义<br><br>  对旧进程数据的保存<br><br>  对新进程数据的恢复<br><br>  进程切换不可过于频繁<br></p>
</blockquote>
</li>
</ul>
<h2 id="2-调度算法评价"><a href="#2-调度算法评价" class="headerlink" title="2.调度算法评价"></a>2.调度算法评价</h2><ul>
<li>CPU利用率<blockquote>
<p>可推广为设备利用率<br><br>  甘特图</p>
</blockquote>
</li>
<li>系统吞吐量<blockquote>
<p>作业/时间</p>
</blockquote>
</li>
<li>周转时间<blockquote>
<p>作业完成时间-作业提交时间<br><br>  平均周转时间(算数平均)<br><br>  带权周转时间: 时间/时间运行时间<br></p>
</blockquote>
</li>
<li>等待时间<blockquote>
<p>外存-&gt;内存-&gt;被服务<br><br>  进程的等待时间<br><br>  作业的等待时间<br></p>
</blockquote>
</li>
<li>响应时间<blockquote>
<p>用户提交到被响应的时间<br></p>
</blockquote>
</li>
</ul>
<h2 id="3-调度算法"><a href="#3-调度算法" class="headerlink" title="3.调度算法"></a>3.调度算法</h2><ul>
<li><p>时间片轮转</p>
<blockquote>
<p>为进程<br><br>公平<br><br>抢占式<br><br>分时操作系统更看重响应时间<br><br>要是换进程的开销不超过1% <br><br>对每个进程公平<br><br>高频切换有开销<br><br>不会导致饥饿<br><br>无优先级<br></p>
</blockquote>
</li>
<li><p>优先级调度</p>
<blockquote>
<p>作业/进程/IO调度<br><br>可抢占  ,  可不抢占<br><br>优先数<br><br>优先级<br><br>就绪队列按照优先级动态改变<br><br>静态优先级/动态优先级<br><br>系统进程一般高于用户进程<br><br>前台进程一般高于后台进程<br><br>操作系统更偏好I/O繁忙型进程<br><br>在就绪队列等待了较长时间,提高优先级<br><br>在处理机运行时间很长,可降低优先级<br><br>频繁调用I/O,可提高优先级<br><br>可能导致低优先级进程饥饿<br></p>
</blockquote>
</li>
<li><p>SIF </p>
<blockquote>
</blockquote>
</li>
<li><p>多级反馈队列</p>
<blockquote>
<p>其他算法的折衷<br><br>(1)设置多级就绪队列, 优先级高到低, 时间片小到大.<br><br>(2)新进程进入第一级队列,按FCFS分配时间片.<br><br>(3)时间片用完 , 进程还未结束. 进入下一级队尾. 如若在最下级, 则调回队尾.<br><br>(4)只有k级队列空, k+1才会被分配时间片.<br><br>若运行时更高级队列不空, 则该进程被剥夺, 调入所在队列队尾<br></p>
</blockquote>
<h2 id="3-进程互斥的硬件实现方法"><a href="#3-进程互斥的硬件实现方法" class="headerlink" title="3.进程互斥的硬件实现方法"></a>3.进程互斥的硬件实现方法</h2></li>
<li><p>中断屏蔽</p>
<blockquote>
<p>在访问临界区前关闭中断<br><br>不适用于多处理机的机器<br><br>只适用于内核进程(才有权限)<br></p>
</blockquote>
</li>
<li><p>TSL指令</p>
<blockquote>
<p>硬件实现  ,  执行时无法中断<br></p>
</blockquote>
</li>
<li><p>Swap指令</p>
<blockquote>
<p>多处理机环境</p>
</blockquote>
</li>
</ul>
<h2 id="4-进程互斥的软件实现方法"><a href="#4-进程互斥的软件实现方法" class="headerlink" title="4.进程互斥的软件实现方法"></a>4.进程互斥的软件实现方法</h2><p>一个进程互斥的场景</p>
<pre><code>进程A:&#123;
    其他代码;
    使用打印机;
    其他代码;
&#125;
进程B:&#123;
    其他代码;
    使用打印机;
    其他代码;
&#125;
//先A在处理机上运行
当A使用打印机时,  A时间片用完,  B获取处理机然后使用打印机.

后果: A, B打印内容混了.
解决方法: 互斥使用临界区资源</code></pre>
<ul>
<li><p>单标志法</p>
<blockquote>
<p>每个进程进入临界区的权限只能被另一进程赋予<br><br>谦让<br><br>违背 <strong>空闲让进</strong> 原则<br></p>
</blockquote>
</li>
<li><p>双标志先检查</p>
<blockquote>
<p>设置flag[]标记各进程想要进入临界区的意愿<br><br>(1)老渣是否想用( <strong>检查意愿</strong> )<br><br>(2)我小渣要用( <strong>上锁</strong> )<br><br>(3)用马桶( <strong>访问临界区</strong>)<br><br>(4)用完了( <strong>解锁</strong> )<br><br>在并发环境下(1)(2)被中断<br><br>违反忙则等待(检查后,来不及上锁)</p>
</blockquote>
</li>
<li><p>双标志后检查 </p>
<blockquote>
<p>与先检查不同的是: 先上锁,  后检查.<br><br>违背空闲让进,  有限等待<br><br>导致饥饿<br></p>
</blockquote>
</li>
<li><p>Peterson算法</p>
<blockquote>
<p>flag[]表达意愿<br><br>turn 表达谦让<br><br>(1)我表达意愿 flag = true<br><br>(2)谦让       turn = other<br><br>(3)若你想用,我等待<br><br>(4)访问临界区<br><br>(5)取消意愿<br><br>最后表达谦让的,  将失去主动权<br><br>实现了<br><br>(1)空闲让进<br><br>(2)忙则等待<br><br>(3)有限等待<br><br>未实现<br><br>(1)让权等待<br></p>
</blockquote>
</li>
</ul>
<h2 id="5-信号量机制"><a href="#5-信号量机制" class="headerlink" title="5.信号量机制"></a>5.信号量机制</h2><p>双标志检查法的缺陷在于 : 检查,  上锁无法一起喝成<br><br>所有解决方案无法实现让权等待<br><br>dijstra提出信号量机制实现进程操作与同步<br><br>用户进程可使用一对 <strong>原语</strong> 来对 <strong>信号量</strong> 操作 <br><br>信号量 : 表示操作系统某些资源的变量.<br><br>一对原语: <strong>wait(s)</strong> (<strong>P操作</strong>),<br><strong>signal(s)</strong> (<strong>V操作</strong>).</p>
<ul>
<li>整型信号量 (探讨缺陷)<blockquote>
<p>(1)初始化<br><br>(2)P操作(进入区)<br><br>(3)V操作(退出区)<br><br>会发生忙等<br></p>
</blockquote>
P,V代码<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> S = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait</span> <span class="params">(<span class="keyword">int</span> S)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ( S&lt;= <span class="number">0</span> ); <span class="comment">//?既然不可中断</span></span><br><span class="line">    S = S - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">signal</span> <span class="params">( <span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">    S = S + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>记录型信号量(<strong>高频考点</strong>)<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*记录型信号量的定义*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">process</span> *<span class="title">L</span>;</span></span><br><span class="line">&#125;semaphore;</span><br><span class="line"><span class="comment">/*进程需要使用资源, 通过wait原语申请*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait</span> <span class="params">(semaphore S)</span></span>&#123;</span><br><span class="line">    S.value--;</span><br><span class="line">    <span class="keyword">if</span>(S.value &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        block (S.L);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*进程使用完后*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">signal</span> <span class="params">(semaphore S)</span></span>&#123;</span><br><span class="line">    s.value++;</span><br><span class="line">    <span class="keyword">if</span>(S.value&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        wakeup(S.L);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>P0进程<br><br>…<br><br>wait(s);<br><br>使用打印机…<br><br>signal(s);<br><br>…<br><br>实现让权等待(等不到资源,  就放弃cpu控制权)(避免忙等)<br></p>
</blockquote>
</li>
</ul>
<blockquote>
</blockquote>
<h2 id="6-信号量机制实现-同步-互斥-前驱"><a href="#6-信号量机制实现-同步-互斥-前驱" class="headerlink" title="6.信号量机制实现 同步 互斥 前驱"></a>6.信号量机制实现 同步 互斥 前驱</h2><ul>
<li><p>进程互斥</p>
<blockquote>
<p>(1) 划定临界区<br><br>  (2)设置 <strong>互斥信号量</strong> (进入临界区的名额) <strong>mutex</strong> 初值为1.</p>
  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">semaphore mutex=<span class="number">1</span>; <span class="comment">//记录型信号量 </span></span><br><span class="line">P1()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(mutex);    <span class="comment">//与V成对</span></span><br><span class="line">    临界区代码...</span><br><span class="line">    V(mutex);   <span class="comment">//与P成对</span></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote>
</li>
<li><p><strong>进程同步:</strong> 要让并发进程有序推进.</p>
  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//代码4必须在代码2后</span></span><br><span class="line">    semaphore S=<span class="number">0</span>    </span><br><span class="line">    P1()&#123;</span><br><span class="line">        代码<span class="number">1</span></span><br><span class="line">        代码<span class="number">2</span></span><br><span class="line">        V(S)</span><br><span class="line">        代码<span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">    P2()&#123;</span><br><span class="line">        P(S)</span><br><span class="line">        代码<span class="number">4</span></span><br><span class="line">        代码<span class="number">5</span></span><br><span class="line">        代码<span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">    ``` </span><br><span class="line">   &gt;(<span class="number">1</span>)在前操作后执行V(S)&lt;br&gt;</span><br><span class="line">   &gt;(<span class="number">2</span>)在后操作前执行P(S)&lt;br&gt;</span><br><span class="line"></span><br><span class="line">* 实现前驱</span><br><span class="line">    &gt;多级进程同步&lt;br&gt;</span><br><span class="line">    &gt;    </span><br><span class="line"></span><br><span class="line">## <span class="number">7.</span>生产者消费者问题</span><br><span class="line">* 问题描述</span><br><span class="line">    &gt;(<span class="number">1</span>)一组生产者&lt;br&gt;</span><br><span class="line">    (<span class="number">2</span>)一组消费者&lt;br&gt;</span><br><span class="line">    (<span class="number">3</span>)一定大小的缓冲区&lt;br&gt;</span><br><span class="line">    (<span class="number">4</span>)缓冲区没满时生产者才能生产&lt;br&gt;</span><br><span class="line">    (<span class="number">5</span>)缓冲区不空消费者才能取&lt;br&gt;</span><br><span class="line">    (<span class="number">6</span>)必须互斥访问缓冲区 __临界资源__ &lt;br&gt;</span><br><span class="line">    &gt;</span><br><span class="line">* 问题分析</span><br><span class="line">    &gt;(<span class="number">1</span>)找出 __同步__ __互斥__ 关系&lt;br&gt;</span><br><span class="line">    &gt;(<span class="number">2</span>)确定 P V大致顺序&lt;br&gt;</span><br><span class="line">    &gt;(<span class="number">3</span>) 消费者,生产者与有产品,缓冲区没满为同步关系&lt;br&gt;</span><br><span class="line">    (<span class="number">4</span>) 各进程互斥&lt;br&gt;</span><br><span class="line">* 代码实现</span><br><span class="line">    ```c</span><br><span class="line">    semaphore mutex = <span class="number">1</span>;</span><br><span class="line">    semaphore empty = n;</span><br><span class="line">    semaphore full = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//生产者代码</span></span><br><span class="line">    producer ()&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            生产一个产品;</span><br><span class="line">            P(empty);</span><br><span class="line">            P(mutex);</span><br><span class="line">            把产品放入缓冲区;</span><br><span class="line">            V(mutex);</span><br><span class="line">            V(full);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    consumer ()&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            P(full);</span><br><span class="line">            P(mutex);</span><br><span class="line">            从缓冲区取产品;</span><br><span class="line">            V(mutex);</span><br><span class="line">            V(empty);</span><br><span class="line">            使用产品;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//消费者代码</span></span><br><span class="line">    <span class="comment">//</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>如若交换某些P操作, 可能发生死锁<br><br>交换V操作问题不大<br><br>不要把取与用操作放在一起, 慧染加锁过程消耗的时间变长<br></p>
</blockquote>
</li>
</ul>
<h2 id="8-多生产多消费"><a href="#8-多生产多消费" class="headerlink" title="8.多生产多消费"></a>8.多生产多消费</h2><ul>
<li><p>问题描述</p>
<blockquote>
<p>(1)生产者生产不同产品<br><br>(2)消费者消费不同产品<br><br>(3)一个缓冲区</p>
</blockquote>
</li>
<li><p>问题分析</p>
<blockquote>
<p>(1)互斥关系<br><br>(2)同步关系<br></p>
</blockquote>
</li>
<li><p>代码实现</p>
<blockquote>
<p>略</p>
</blockquote>
</li>
<li><p><strong>注意</strong> </p>
<blockquote>
<p>生产者消费者问题中, 若缓冲区大于1, 则必须设置mutex实现互斥访问.</p>
</blockquote>
</li>
</ul>
<h2 id="9-吸烟者问题"><a href="#9-吸烟者问题" class="headerlink" title="9.吸烟者问题"></a>9.吸烟者问题</h2><ul>
<li><p>问题描述</p>
<blockquote>
<p>(1)一个生产者供应三种组合<br><br>(2)三个吸烟者进程, 需要特定的一种组合才能抽烟<br><br>(3)缓冲区大小为1<br><br>(4)让消费者轮流吸烟<br><br>(5)消费者消费完才能进行下一次生产</p>
</blockquote>
</li>
<li><p>问题分析<br>略</p>
</li>
<li><p>代码实现</p>
</li>
<li><p>注意 </p>
<blockquote>
<p>这个问题可以为我们们解决 <strong>就可以生产多个产品的单生产者问题</strong> 提供解决思路.</p>
</blockquote>
</li>
</ul>
<h2 id="10-读者写者问题"><a href="#10-读者写者问题" class="headerlink" title="10.读者写者问题"></a>10.读者写者问题</h2><ul>
<li><p>问题描述</p>
<blockquote>
<p>(1)允许多个读者读文件<br></p>
<pre><code>(2)允许一个写者写&lt;br&gt;
(3)在写操作完成前, 不允许其他读者与写者工作&lt;br&gt;
(4)写操作开始前, 所有进程需退出文件 &lt;br&gt;
(5)操作系统中对共享文件的操作&lt;br&gt;
(6)文件由缓存段构成&lt;br&gt;</code></pre>
</blockquote>
</li>
<li><p>问题分析</p>
<blockquote>
<p>(1)两类进程: 写进程, 读进程<br><br>  (2)两类互斥关系: 写-写, 读-写<br><br>  (3)第一个读进程加锁,最后一个读进程解锁(可能读进程 <strong>死锁</strong> ,写进程 <strong>饿死</strong>).<br><br>  (4) 加入count 解决 <strong>读进程死锁</strong> , 加入w实现写优先 解决 <strong>写进程饿死</strong></p>
</blockquote>
</li>
<li><p>代码实现</p>
<blockquote>
<p>略<br></p>
</blockquote>
</li>
<li><p>核心思想 </p>
<blockquote>
<p>设置计算器count<br><br>  如果操作不能一气喝成,则需要对操作加锁<br></p>
</blockquote>
<h2 id="11-哲学家进餐"><a href="#11-哲学家进餐" class="headerlink" title="11.哲学家进餐"></a>11.哲学家进餐</h2></li>
<li><p>问题描述</p>
<blockquote>
<p>(1)五个哲学家,有思考与进食两个状态.<br><br>  (2)只有5根筷子<br><br>  (3)哲学家只能拿到自己左手右手边的筷子才能进食.<br><br>  (4)进食完, 放下筷子<br></p>
</blockquote>
</li>
<li><p>问题分析</p>
<blockquote>
<p>(1)必须持有两个临界资源才能进食<br><br>(2)合理分配临界资源, 防止 <strong>死锁</strong> .<br><br>(3)定义互斥信号量数组chopstick[5], 对五个筷子实现互斥使用.<br> (4) 最多允许四个哲学家进食 <strong>防止死锁方案一</strong><br><br> (5) 奇数号哲学家先拿左边筷子, 偶数号先拿右边的 <strong>防止死锁方案二</strong><br><br> (6) 仅当哲学家能拿两个筷子时才能拿筷子(需配合互斥信号量实现一气呵成) <strong>防止死锁方案三</strong><br></p>
</blockquote>
</li>
<li><p>代码实现</p>
<blockquote>
<p>略</p>
</blockquote>
<h2 id="12-管程"><a href="#12-管程" class="headerlink" title="12.管程"></a>12.管程</h2><p>因为信号量机制存在编程困难和容易出错的确定, 需要引入管程.<br><br>让程序员从信号量中解放<br><br>一种高级进程管理技术<br></p>
</li>
<li><p>定义</p>
<blockquote>
<p>(1) 局部于管程的 共享数据结构 说明.<br><br>  (2)对 共享数据结构 的操作的过程<br><br>  (3)对共享数据进行 初始化 的语句<br><br>  (4)得有一个名字<br><br>  (5)管程数据只能有局部的过程才能访问数据<br><br>  (6)每次仅允许一个进程在管程内执行某个内部过程<br><br>  (7)每次只允许一个进程访问管程<br></p>
</blockquote>
</li>
<li><p>编码示例</p>
<blockquote>
<p>略</p>
</blockquote>
<h2 id="12-死锁的概念"><a href="#12-死锁的概念" class="headerlink" title="12.死锁的概念"></a>12.死锁的概念</h2></li>
<li><p>死锁</p>
</li>
<li><p>饥饿</p>
</li>
<li><p>死循环</p>
<h2 id="13-死锁的预防"><a href="#13-死锁的预防" class="headerlink" title="13.死锁的预防"></a>13.死锁的预防</h2></li>
<li><p>破坏互斥条件</p>
<blockquote>
<p>将互斥的资源, 转换成共享设备(SPOOLing技术)<br></p>
</blockquote>
</li>
<li><p>破坏不剥夺条件</p>
<blockquote>
</blockquote>
<p>  当一个进程请求资源不得到满足时, 他必须释放它拥有的所有资源<br><br>  当一个进程请求资源不得到满足时, 强行剥夺他人资源<br><br>  实现复杂<br><br>  前功尽弃, 只适用于易保存, 易恢复, 如CPU<br><br>  容易造成饥饿<br></p>
<blockquote>
</blockquote>
</li>
<li><p>破坏请求和保持</p>
<blockquote>
<p>静态分配方法<br><br>资源利用率低<br><br>导致进程饥饿<br></p>
</blockquote>
</li>
<li><p>破坏循环等待条件</p>
<blockquote>
<p>给资源编号<br><br> 进程必须按编号递增的顺序请求资源<br><br> 同类资源一次性申请完<br><br> 添加新设备不方便<br><br> 实际顺序与编号顺序不一致<br><br> 必须按规定次序申请,  编程麻烦<br></p>
</blockquote>
<h2 id="13-避免死锁-小题-大题"><a href="#13-避免死锁-小题-大题" class="headerlink" title="13.避免死锁 (小题, 大题)"></a>13.避免死锁 (小题, 大题)</h2></li>
<li><p>银行家算法</p>
<blockquote>
<p>找到安全序列<br><br>安全状态, 不会发生死锁<br><br>不安全状态, 可能发生死锁<br><br>钱 -&gt; 各种资源, 即数字 -&gt; 向量<br><br>进程编号 -&gt; 最大需求 -&gt; 已分配 -&gt; 最多还需要<br><br>考试要求 : 找出安全序列<br></p>
</blockquote>
</li>
</ul>
<h2 id="14-死锁的检测与解除"><a href="#14-死锁的检测与解除" class="headerlink" title="14.死锁的检测与解除"></a>14.死锁的检测与解除</h2><ul>
<li><p>检测</p>
<blockquote>
<p>数据结构: 资源分配图(进程节点,  和资源节点)<br><br>能消除图所以边, 则处于安全状态, 一定不发生死锁.<br><br>不能消除, 则已经发生死锁<br></p>
</blockquote>
</li>
<li><p>解除</p>
<blockquote>
<p>(1)资源剥夺法<br><br>(2)撤销进程法<br><br>(3)进程回退法<br><br>进程优先级<br><br>执行时间<br><br>持有进程种类<br><br>完成时间<br><br>交互式与批处理式的<br></p>
</blockquote>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://www.baidu.com/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0%E4%B8%89/" data-id="ckf7yp0qh0001isd85prves23" class="article-share-link" data-share="baidu" data-title="复习杂记三">Share</a>
      

      

      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/17/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0%E5%9B%9B/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          复习杂记四
        
      </div>
    </a>
  
  
    <a href="/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B02/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">复习杂记二</div>
    </a>
  
</nav>

  
</article>




        
            <section id="comments" class="comments">
              <style>
                .comments{margin:30px;padding:10px;background:#fff}
                @media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#fff}}
              </style>
              <div id="vcomment" class="comment"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script src="https://cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    var notify = 'true' == true ? true : false;
    var verify = 'true' == true ? true : false;
    new Valine({
        av: AV,
        el: '#vcomment',
        notify: notify,
        app_id: "9513hpXxI0iyfDiDLIghGJVK-MdYXbMMI",
        app_key: "XtvEwhXTTJdhRmM65lfJpL0G",
        placeholder: "建议留下邮箱哦",
        avatar:"robohash",
    });
</script>

          </section>
        



</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" rel="tag">计算机组成原理</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 20px;">操作系统</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 15px;">杂谈</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 10px;">计算机组成原理</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/17/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0%E5%9B%9B/">复习杂记四</a>
          </li>
        
          <li>
            <a href="/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0%E4%B8%89/">复习杂记三</a>
          </li>
        
          <li>
            <a href="/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B02/">复习杂记二</a>
          </li>
        
          <li>
            <a href="/2020/09/16/%E5%A4%8D%E4%B9%A0%E6%9D%82%E8%AE%B0/">复习杂记一</a>
          </li>
        
          <li>
            <a href="/2020/09/14/%E4%B8%8B%E8%AE%BA%E6%96%87/">下论文</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/joker881" target="_blank">mygithub</a>
          </li>
        
          <li>
            <a href="https://gitee.com/joker881" target="_blank">mygitee</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>

<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("09/06/2020 23:09:25");//在此处修改你的建站时间
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="totop"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>





<script src="/js/script.js"></script>


</div>
</body>
</html>
